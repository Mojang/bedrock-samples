{
  "namespace": "friendsbutton",

  "friendsdrawer_animated_icon": {
    "type": "image",
    "layer": 2,
    "size": [ 18, 18 ],
    "$friends_icon|default":"",
    "texture": "$friends_icon"
  },

   "profilepicture": {
    "type": "custom",
    "renderer": "profile_image_renderer",
    "size": [ 18, 18 ],
    "layer": 2,
    "$gamerpic_visible|default": "#none",
    "$profilepic|default" : "#none",
    "bindings": [
      {
        "binding_name": "$profilepic",
        "binding_name_override": "#profile_image_options",
        "binding_condition": "visible"
      },
      {
        "binding_name": "$gamerpic_visible",
        "binding_name_override": "#visible"
      }
    ]
  },

  "persona_icon_with_border":{
    "type":"panel",
    "size":[18, 18],
    "offset": [ -2, 0 ],
    "anchor_from":"top_left",
    "anchor_to": "top_left",
    "$show_icon|default":"#none",
    "controls": [
      {
        "friendsdrawer_animated_icon@friendsbutton.profilepicture": {
          "layer": 2,
          "$gamerpic|default": "#none",
          "$profilepic": "$gamerpic",
          "anchor_from":"top_left",
          "anchor_to": "top_left"
        }
      },
      {
        "border_black@common.focus_border_black": {
          "layer": 3,
          "size": [ 18, 18 ],
          "anchor_from":"top_left",
          "anchor_to": "top_left"
        }
      }
    ],
    "bindings": [
      {
        "binding_name": "$show_icon",
        "binding_name_override": "#visible"
      }
    ]
  },

  "friendsdrawer_persona_icons": {
    "type": "stack_panel",
    "orientation": "horizontal"
  },

  "social_button_stackpanel@friendsbutton.friendsdrawer_persona_icons":{
    "controls":[
      {
        "social_icon@friendsbutton.friendsdrawer_animated_icon": {
          "offset": [ -2, 0 ],
          "anchor_from": "top_left",
          "anchor_to": "top_left",
          "$friends_icon": "/textures/ui/icons/icon_spring",
          "bindings": [
            {
              "binding_name": "#social_icon",
              "binding_name_override": "#texture",
              "binding_condition": "visible"
            }
          ]
        }
      }
    ]
  },

  "self_persona_stackpanel@friendsbutton.friendsdrawer_persona_icons":{
    "controls":[
      {
        "self_icon@friendsbutton.persona_icon_with_border": {
          "$gamerpic": "#current_user_profile_options",
          "$show_icon": "#is_in_party"
        }
      }
    ]
  },

  "single_friend_persona_stackpanel@friendsbutton.friendsdrawer_persona_icons":{
    "controls":[
      {
        "self_icon@friendsbutton.self_persona_stackpanel": {
        }
      },
      {
        "friend_one_icon@friendsbutton.persona_icon_with_border": {
          "$gamerpic": "#first_party_member_profile_options",
          "$show_icon": "#is_in_party"
        }
      }
    ]
  },


  "many_friend_persona_stackpanel@friendsbutton.friendsdrawer_persona_icons": {
    "controls": [
      {
        "self_icon@friendsbutton.self_persona_stackpanel": {
        }
      },
      {
          "extra_friends_text_panel": {
          "type": "panel",
          "size": [18, 18],  
          "controls": [
            {
              "background": {
                "layer": 1,  
                "size": [18, 18],
                "anchor_from": "top_left",
                "anchor_to": "top_left",
                "type": "image",
                "texture": "textures/ui/button_borderless_dark"
              }
            },
            {
              "extra_members_label": {
                "type": "label",
                "font_size": "normal",
                "anchor_from": "center",
                "anchor_to": "center",
                "layer": 2,
                "text_alignment": "center",
                "color": "$dark_button_default_text_color",
                "text": "#party_extra_member_count",
                "bindings": [
                  {
                    "binding_name": "#party_extra_member_count",
                    "binding_name_override": "#party_extra_member_count",
                    "binding_condition": "visible"
                  }
                ]
              }
            },
            {
              "border_black@common.focus_border_black": {
                "layer": 3,  
                "size": [18, 18],
                "anchor_from": "top_left",
                "anchor_to": "top_left"
              }
            }
          ]
        }
      }
    ]
  },

  "button@common_buttons.light_content_form_fitting_button": {
    "size": [ "100%c", "100%c" ],
    "$button_content_size_override": [ "100%c", "100%c - 4px" ],
    "$button_content": "friendsbutton.friendsdrawer_button_content",
    "$pressed_button_name": "button.friends_drawer",
    "$context|default": "",
    "property_bag": {
      "#context": "$context"
    }
  },

  "friendsdrawer_button_content": {
    "type": "stack_panel",
    "orientation": "horizontal",
    "size": [ "100%c", 24 ],
    "controls": [
      {
        "social_factory_stackpanel":{
          "type":"stack_panel",
          "orientation":"horizontal",
          "anchor_from":"top_left",
          "anchor_to":"top_left",
          "factory": {
            "name": "social_icons_factory",
            "control_ids": {
              "social_button_control": "social_button_control@friendsbutton.social_button_stackpanel",
              "self_persona_control": "self_persona_control@friendsbutton.self_persona_stackpanel",
              "single_friend_persona_control": "single_friend_persona_control@friendsbutton.single_friend_persona_stackpanel",
              "many_friend_persona_control": "many_friend_persona_control@friendsbutton.many_friend_persona_stackpanel"
            }
          },
          "bindings": [
            {
              "binding_name": "#social_icon_content",
              "binding_name_override": "#collection_length",
              "binding_type": "global",
              "binding_condition": "visible"
            }
          ]
        }
      },
      {
        "padding_middle@common.empty_panel": {
          "size": [ 6, "100%" ]
        }
      },
      {
        "vertically_centered_text": {
          "type": "stack_panel",
          "orientation": "vertical",
          "size": [ "100%c", "100%c" ],
          "controls": [
            {
              "top_padding": {
                "type": "panel",
                "size": [ "0px", 4 ]
              }
            },
            {
              "profile_button_label@common_buttons.new_ui_binding_button_label": {
                "layer": 1,
                "$button_text_binding_type": "global",
                "$button_text_size": [ "default", "default" ],
                "$button_text_max_size": [ "default", 20 ],
                "$button_binding_condition": "none",
                "$button_text_grid_collection_name": "",
                "$button_text": "#social_button_text"
              }
            }
          ]
        }
      },
      {
        "padding_right@common.empty_panel": {
          "size": [ 6, "100%" ]
        }
      }
    ]
  }

}
